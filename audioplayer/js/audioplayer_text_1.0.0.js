(function(e){function n(t,n){function tn(e){return i.preferFlash&&_t&&!i.ignoreFlash&&i.flash[e]!==undefined&&i.flash[e]}function nn(e){return function(t){var n=this._s,r;if(!n||!n._a){if(n&&n.id){i._wD(f+"ignoring "+t.type+": "+n.id)}else{i._wD(f+"ignoring "+t.type)}r=null}else{r=e.call(this,t)}return r}}this.setupOptions={url:t||null,flashVersion:8,debugMode:true,debugFlash:false,useConsole:true,consoleOnly:true,waitForWindowLoad:false,bgColor:"#ffffff",useHighPerformance:false,flashPollingInterval:null,html5PollingInterval:null,flashLoadTimeout:1e3,wmode:null,allowScriptAccess:"always",useFlashBlock:false,useHTML5Audio:true,html5Test:/^(probably|maybe)$/i,preferFlash:true,noSWFCache:false};this.defaultOptions={autoLoad:false,autoPlay:false,from:null,loops:1,onid3:null,onload:null,whileloading:null,onplay:null,onpause:null,onresume:null,whileplaying:null,onposition:null,onstop:null,onfailure:null,onfinish:null,multiShot:true,multiShotEvents:false,position:null,pan:0,stream:true,to:null,type:null,usePolicyFile:false,volume:100};this.flash9Options={isMovieStar:null,usePeakData:false,useWaveformData:false,useEQData:false,onbufferchange:null,ondataerror:null};this.movieStarOptions={bufferTime:3,serverURL:null,onconnect:null,duration:null};this.audioFormats={mp3:{type:['audio/mpeg; codecs="mp3"',"audio/mpeg","audio/mp3","audio/MPA","audio/mpa-robust"],required:true},mp4:{related:["aac","m4a","m4b"],type:['audio/mp4; codecs="mp4a.40.2"',"audio/aac","audio/x-m4a","audio/MP4A-LATM","audio/mpeg4-generic"],required:false},ogg:{type:["audio/ogg; codecs=vorbis"],required:false},wav:{type:['audio/wav; codecs="1"',"audio/wav","audio/wave","audio/x-wav"],required:false}};this.movieID="sm2-container";this.id=n||"sm2movie";this.debugID="soundmanager-debug";this.debugURLParam=/([#?&])debug=1/i;this.versionNumber="V2.97a.20121104";this.version=null;this.movieURL=null;this.altURL=null;this.swfLoaded=false;this.enabled=false;this.oMC=null;this.sounds={};this.soundIDs=[];this.muted=false;this.didFlashBlock=false;this.filePattern=null;this.filePatterns={flash8:/\.mp3(\?.*)?$/i,flash9:/\.mp3(\?.*)?$/i};this.features={buffering:false,peakData:false,waveformData:false,eqData:false,movieStar:false};this.sandbox={type:null,types:{remote:"remote (domain-based) rules",localWithFile:"local with file access (no internet access)",localWithNetwork:"local with network (internet access only, no local access)",localTrusted:"local, trusted (local+internet access)"},description:null,noRemote:null,noLocal:null};this.html5={usingFlash:null};this.flash={};this.html5Only=false;this.ignoreFlash=false;var r,i=this,s=null,o=null,u="soundManager",a=u+"::",f="HTML5::",l,c=navigator.userAgent,h=e,p=h.location.href.toString(),d=document,v,m,g,y,b=[],w=true,E,S=false,x=false,T=false,N=false,C=false,k,L=0,A,O,M,_,D,P,H,B,j,F,I,q,R,U,z,W,X,V,$,J,K,Q=["log","info","warn","error"],G=8,Y,Z,et,tt=null,nt=null,rt,it,st,ot,ut,at,ft,lt,ct,ht=false,pt=false,dt,vt,mt,gt=0,yt=null,bt,wt=null,Et,St,xt,Tt,Nt,Ct,kt,Lt,At=Array.prototype.slice,Ot=false,Mt,_t,Dt,Pt,Ht,Bt,jt=c.match(/(ipad|iphone|ipod)/i),Ft=c.match(/msie/i),It=c.match(/webkit/i),qt=c.match(/safari/i)&&!c.match(/chrome/i),Rt=c.match(/opera/i),Ut=c.match(/(mobile|pre\/|xoom)/i)||jt,zt=!p.match(/usehtml5audio/i)&&!p.match(/sm2\-ignorebadua/i)&&qt&&!c.match(/silk/i)&&c.match(/OS X 10_6_([3-7])/i),Wt=e.console!==undefined&&console.log!==undefined,Xt=d.hasFocus!==undefined?d.hasFocus():null,Vt=qt&&(d.hasFocus===undefined||!d.hasFocus()),$t=!Vt,Jt=/(mp3|mp4|mpa|m4a|m4b)/i,Kt="about:blank",Qt=d.location?d.location.protocol.match(/http/i):null,Gt=!Qt?"http:/"+"/":"",Yt=/^\s*audio\/(?:x-)?(?:mpeg4|aac|flv|mov|mp4||m4v|m4a|m4b|mp4v|3gp|3g2)\s*(?:$|;)/i,Zt=["mpeg4","aac","flv","mov","mp4","m4v","f4v","m4a","m4b","mp4v","3gp","3g2"],en=new RegExp("\\.("+Zt.join("|")+")(\\?.*)?$","i");this.mimePattern=/^\s*audio\/(?:x-)?(?:mp(?:eg|3))\s*(?:$|;)/i;this.useAltURL=!Qt;ot={swfBox:"sm2-object-box",swfDefault:"movieContainer",swfError:"swf_error",swfTimedout:"swf_timedout",swfLoaded:"swf_loaded",swfUnblocked:"swf_unblocked",sm2Debug:"sm2_debug",highPerf:"high_performance",flashDebug:"flash_debug"};if(Ut){i.useHTML5Audio=true;i.preferFlash=false;if(jt){i.ignoreFlash=true;Ot=true}}this.hasHTML5=function(){try{return Audio!==undefined&&(Rt&&opera!==undefined&&opera.version()<10?new Audio(null):new Audio).canPlayType!==undefined}catch(e){return false}}();this.setup=function(e){var t=!i.url;if(e!==undefined&&T&&wt&&i.ok()&&(e.flashVersion!==undefined||e.url!==undefined)){lt(rt("setupLate"))}M(e);if(t&&W&&e.url!==undefined){i.beginDelayedInit()}if(!W&&e.url!==undefined&&d.readyState==="complete"){setTimeout(U,1)}return i};this.ok=function(){return wt?T&&!N:i.useHTML5Audio&&i.hasHTML5};this.supported=this.ok;this.getMovie=function(e){return l(e)||d[e]||h[e]};this.createSound=function(e,t){function l(){a=at(a);i.sounds[a.id]=new r(a);i.soundIDs.push(a.id);return i.sounds[a.id]}var n,s,a,f=null;n=u+".createSound(): ";s=n+rt(!T?"notReady":"notOK");if(!T||!i.ok()){lt(s);return false}if(t!==undefined){e={id:e,url:t}}a=O(e);a.url=bt(a.url);if(a.id.toString().charAt(0).match(/^[0-9]$/)){i._wD(n+rt("badID",a.id),2)}i._wD(n+a.id+" ("+a.url+")",1);if(ct(a.id,true)){i._wD(n+a.id+" exists",1);return i.sounds[a.id]}if(St(a)){f=l();i._wD("Creating sound "+a.id+", using HTML5");f._setup_html5(a)}else{if(y>8){if(a.isMovieStar===null){a.isMovieStar=!!(a.serverURL||(a.type?a.type.match(Yt):false)||a.url.match(en))}if(a.isMovieStar){i._wD(n+"using MovieStar handling");if(a.loops>1){k("noNSLoop")}}}a=ft(a,n);f=l();if(y===8){o._createSound(a.id,a.loops||1,a.usePolicyFile)}else{o._createSound(a.id,a.url,a.usePeakData,a.useWaveformData,a.useEQData,a.isMovieStar,a.isMovieStar?a.bufferTime:false,a.loops||1,a.serverURL,a.duration||null,a.autoPlay,true,a.autoLoad,a.usePolicyFile);if(!a.serverURL){f.connected=true;if(a.onconnect){a.onconnect.apply(f)}}}if(!a.serverURL&&(a.autoLoad||a.autoPlay)){f.load(a)}}if(!a.serverURL&&a.autoPlay){f.play()}return f};this.destroySound=function(e,t){if(!ct(e)){return false}var n=i.sounds[e],r;n._iO={};n.stop();n.unload();for(r=0;r<i.soundIDs.length;r++){if(i.soundIDs[r]===e){i.soundIDs.splice(r,1);break}}if(!t){n.destruct(true)}n=null;delete i.sounds[e];return true};this.load=function(e,t){if(!ct(e)){return false}return i.sounds[e].load(t)};this.unload=function(e){if(!ct(e)){return false}return i.sounds[e].unload()};this.onPosition=function(e,t,n,r){if(!ct(e)){return false}return i.sounds[e].onposition(t,n,r)};this.onposition=this.onPosition;this.clearOnPosition=function(e,t,n){if(!ct(e)){return false}return i.sounds[e].clearOnPosition(t,n)};this.play=function(e,t){var n=false;if(!T||!i.ok()){lt(u+".play(): "+rt(!T?"notReady":"notOK"));return n}if(!ct(e)){if(!(t instanceof Object)){t={url:t}}if(t&&t.url){i._wD(u+'.play(): attempting to create "'+e+'"',1);t.id=e;n=i.createSound(t).play()}return n}return i.sounds[e].play(t)};this.start=this.play;this.setPosition=function(e,t){if(!ct(e)){return false}return i.sounds[e].setPosition(t)};this.stop=function(e){if(!ct(e)){return false}i._wD(u+".stop("+e+")",1);return i.sounds[e].stop()};this.stopAll=function(){var e;i._wD(u+".stopAll()",1);for(e in i.sounds){if(i.sounds.hasOwnProperty(e)){i.sounds[e].stop()}}};this.pause=function(e){if(!ct(e)){return false}return i.sounds[e].pause()};this.pauseAll=function(){var e;for(e=i.soundIDs.length-1;e>=0;e--){i.sounds[i.soundIDs[e]].pause()}};this.resume=function(e){if(!ct(e)){return false}return i.sounds[e].resume()};this.resumeAll=function(){var e;for(e=i.soundIDs.length-1;e>=0;e--){i.sounds[i.soundIDs[e]].resume()}};this.togglePause=function(e){if(!ct(e)){return false}return i.sounds[e].togglePause()};this.setPan=function(e,t){if(!ct(e)){return false}return i.sounds[e].setPan(t)};this.setVolume=function(e,t){if(!ct(e)){return false}return i.sounds[e].setVolume(t)};this.mute=function(e){var t=0;if(e instanceof String){e=null}if(!e){i._wD(u+".mute(): Muting all sounds");for(t=i.soundIDs.length-1;t>=0;t--){i.sounds[i.soundIDs[t]].mute()}i.muted=true}else{if(!ct(e)){return false}i._wD(u+'.mute(): Muting "'+e+'"');return i.sounds[e].mute()}return true};this.muteAll=function(){i.mute()};this.unmute=function(e){var t;if(e instanceof String){e=null}if(!e){i._wD(u+".unmute(): Unmuting all sounds");for(t=i.soundIDs.length-1;t>=0;t--){i.sounds[i.soundIDs[t]].unmute()}i.muted=false}else{if(!ct(e)){return false}i._wD(u+'.unmute(): Unmuting "'+e+'"');return i.sounds[e].unmute()}return true};this.unmuteAll=function(){i.unmute()};this.toggleMute=function(e){if(!ct(e)){return false}return i.sounds[e].toggleMute()};this.getMemoryUse=function(){var e=0;if(o&&y!==8){e=parseInt(o._getMemoryUse(),10)}return e};this.disable=function(e){var t;if(e===undefined){e=false}if(N){return false}N=true;k("shutdown",1);for(t=i.soundIDs.length-1;t>=0;t--){Y(i.sounds[i.soundIDs[t]])}A(e);Lt.remove(h,"load",H);return true};this.canPlayMIME=function(e){var t;if(i.hasHTML5){t=xt({type:e})}if(!t&&wt){t=e&&i.ok()?!!((y>8?e.match(Yt):null)||e.match(i.mimePattern)):null}return t};this.canPlayURL=function(e){var t;if(i.hasHTML5){t=xt({url:e})}if(!t&&wt){t=e&&i.ok()?!!e.match(i.filePattern):null}return t};this.canPlayLink=function(e){if(e.type!==undefined&&e.type){if(i.canPlayMIME(e.type)){return true}}return i.canPlayURL(e.href)};this.getSoundById=function(e,t){if(!e){throw new Error(u+".getSoundById(): sID is null/undefined")}var n=i.sounds[e];if(!n&&!t){i._wD('"'+e+'" is an invalid sound ID.',2)}return n};this.onready=function(e,t){var n="onready",r=false;if(typeof e==="function"){if(T){i._wD(rt("queue",n))}if(!t){t=h}D(n,e,t);P();r=true}else{throw rt("needFunction",n)}return r};this.ontimeout=function(e,t){var n="ontimeout",r=false;if(typeof e==="function"){if(T){i._wD(rt("queue",n))}if(!t){t=h}D(n,e,t);P({type:n});r=true}else{throw rt("needFunction",n)}return r};this._writeDebug=function(e,t,n){var r="soundmanager-debug",s,o,u;if(!i.debugMode){return false}if(n!==undefined&&n){e=e+" | "+(new Date).getTime()}if(Wt&&i.useConsole){u=Q[t];if(console[u]!==undefined){console[u](e)}else{console.log(e)}if(i.consoleOnly){return true}}try{s=l(r);if(!s){return false}o=d.createElement("div");if(++L%2===0){o.className="sm2-alt"}if(t===undefined){t=0}else{t=parseInt(t,10)}o.appendChild(d.createTextNode(e));if(t){if(t>=2){o.style.fontWeight="bold"}if(t===3){o.style.color="#ff3333"}}s.insertBefore(o,s.firstChild)}catch(a){}s=null;return true};this._wD=this._writeDebug;this._debug=function(){var e,t;k("currentObj",1);for(e=0,t=i.soundIDs.length;e<t;e++){i.sounds[i.soundIDs[e]]._debug()}};this.reboot=function(){i._wD(u+".reboot()");if(i.soundIDs.length){i._wD("Destroying "+i.soundIDs.length+" SMSound objects...")}var e,t;for(e=i.soundIDs.length-1;e>=0;e--){i.sounds[i.soundIDs[e]].destruct()}if(o){try{if(Ft){nt=o.innerHTML}tt=o.parentNode.removeChild(o);i._wD("Flash movie removed.")}catch(n){k("badRemove",2)}}nt=tt=wt=null;i.enabled=W=T=ht=pt=S=x=N=i.swfLoaded=false;i.soundIDs=[];i.sounds={};o=null;for(e in b){if(b.hasOwnProperty(e)){for(t=b[e].length-1;t>=0;t--){b[e][t].fired=false}}}i._wD(u+": Rebooting...");h.setTimeout(i.beginDelayedInit,20)};this.getMoviePercent=function(){return o&&"PercentLoaded"in o?o.PercentLoaded():null};this.beginDelayedInit=function(){C=true;U();setTimeout(function(){if(pt){return false}V();R();pt=true;return true},20);B()};this.destruct=function(){i._wD(u+".destruct()");i.disable(true)};r=function(e){var t=this,n,r,u,a,l,c,h=false,p=[],d=0,v,m,g=null,b;b={duration:null,time:null};this.id=e.id;this.sID=this.id;this.url=e.url;this.options=O(e);this.instanceOptions=this.options;this._iO=this.instanceOptions;this.pan=this.options.pan;this.volume=this.options.volume;this.isHTML5=false;this._a=null;this.id3={};this._debug=function(){if(i.debugMode){var e=null,n=[],r,s,o=64;for(e in t.options){if(t.options[e]!==null){if(typeof t.options[e]==="function"){r=t.options[e].toString();r=r.replace(/\s\s+/g," ");s=r.indexOf("{");n.push(" "+e+": {"+r.substr(s+1,Math.min(Math.max(r.indexOf("\n")-1,o),o)).replace(/\n/g,"")+"... }")}else{n.push(" "+e+": "+t.options[e])}}}i._wD("SMSound() merged options: {\n"+n.join(", \n")+"\n}")}};this._debug();this.load=function(e){var n=null,r;if(e!==undefined){t._iO=O(e,t.options)}else{e=t.options;t._iO=e;if(g&&g!==t.url){k("manURL");t._iO.url=t.url;t.url=null}}if(!t._iO.url){t._iO.url=t.url}t._iO.url=bt(t._iO.url);t.instanceOptions=t._iO;r=t._iO;i._wD("SMSound.load(): "+r.url,1);if(r.url===t.url&&t.readyState!==0&&t.readyState!==2){k("onURL",1);if(t.readyState===3&&r.onload){r.onload.apply(t,[!!t.duration])}return t}t.loaded=false;t.readyState=1;t.playState=0;t.id3={};if(St(r)){n=t._setup_html5(r);if(!n._called_load){i._wD(f+"load: "+t.id);t._html5_canplay=false;if(t.url!==r.url){i._wD(k("manURL")+": "+r.url);t._a.src=r.url;t.setPosition(0)}t._a.autobuffer="auto";t._a.preload="auto";t._a._called_load=true;if(r.autoPlay){t.play()}}else{i._wD(f+"ignoring request to load again: "+t.id)}}else{try{t.isHTML5=false;t._iO=ft(at(r));r=t._iO;if(y===8){o._load(t.id,r.url,r.stream,r.autoPlay,r.usePolicyFile)}else{o._load(t.id,r.url,!!r.stream,!!r.autoPlay,r.loops||1,!!r.autoLoad,r.usePolicyFile)}}catch(s){k("smError",2);E("onload",false);$({type:"SMSOUND_LOAD_JS_EXCEPTION",fatal:true})}}t.url=r.url;return t};this.unload=function(){if(t.readyState!==0){i._wD('SMSound.unload(): "'+t.id+'"');if(!t.isHTML5){if(y===8){o._unload(t.id,Kt)}else{o._unload(t.id)}}else{a();if(t._a){t._a.pause();Nt(t._a,Kt);g=Kt}}n()}return t};this.destruct=function(e){i._wD('SMSound.destruct(): "'+t.id+'"');if(!t.isHTML5){t._iO.onfailure=null;o._destroySound(t.id)}else{a();if(t._a){t._a.pause();Nt(t._a);if(!Ot){u()}t._a._s=null;t._a=null}}if(!e){i.destroySound(t.id,true)}};this.play=function(e,n){var r,s,u,a,f=true,p=null;r="SMSound.play(): ";n=n===undefined?true:n;if(!e){e={}}if(t.url){t._iO.url=t.url}t._iO=O(t._iO,t.options);t._iO=O(e,t._iO);t._iO.url=bt(t._iO.url);t.instanceOptions=t._iO;if(t._iO.serverURL&&!t.connected){if(!t.getAutoPlay()){i._wD(r+" Netstream not connected yet - setting autoPlay");t.setAutoPlay(true)}return t}if(St(t._iO)){t._setup_html5(t._iO);l()}if(t.playState===1&&!t.paused){s=t._iO.multiShot;if(!s){i._wD(r+'"'+t.id+'" already playing (one-shot)',1);p=t}else{i._wD(r+'"'+t.id+'" already playing (multi-shot)',1)}}if(p!==null){return p}if(e.url&&e.url!==t.url){t.load(t._iO)}if(!t.loaded){if(t.readyState===0){i._wD(r+'Attempting to load "'+t.id+'"',1);if(!t.isHTML5){t._iO.autoPlay=true;t.load(t._iO)}else{t.load(t._iO)}t.instanceOptions=t._iO}else if(t.readyState===2){i._wD(r+'Could not load "'+t.id+'" - exiting',2);p=t}else{i._wD(r+'"'+t.id+'" is loading - attempting to play..',1)}}else{i._wD(r+'"'+t.id+'"')}if(p!==null){return p}if(!t.isHTML5&&y===9&&t.position>0&&t.position===t.duration){i._wD(r+'"'+t.id+'": Sound at end, resetting to position:0');e.position=0}if(t.paused&&t.position>=0&&(!t._iO.serverURL||t.position>0)){i._wD(r+'"'+t.id+'" is resuming from paused state',1);t.resume()}else{t._iO=O(e,t._iO);if(t._iO.from!==null&&t._iO.to!==null&&t.instanceCount===0&&t.playState===0&&!t._iO.serverURL){a=function(){t._iO=O(e,t._iO);t.play(t._iO)};if(t.isHTML5&&!t._html5_canplay){i._wD(r+'Beginning load of "'+t.id+'" for from/to case');t.load({oncanplay:a});p=false}else if(!t.isHTML5&&!t.loaded&&(!t.readyState||t.readyState!==2)){i._wD(r+'Preloading "'+t.id+'" for from/to case');t.load({onload:a});p=false}if(p!==null){return p}t._iO=m()}i._wD(r+'"'+t.id+'" is starting to play');if(!t.instanceCount||t._iO.multiShotEvents||!t.isHTML5&&y>8&&!t.getAutoPlay()){t.instanceCount++}if(t._iO.onposition&&t.playState===0){c(t)}t.playState=1;t.paused=false;t.position=t._iO.position!==undefined&&!isNaN(t._iO.position)?t._iO.position:0;if(!t.isHTML5){t._iO=ft(at(t._iO))}if(t._iO.onplay&&n){t._iO.onplay.apply(t);h=true}t.setVolume(t._iO.volume,true);t.setPan(t._iO.pan,true);if(!t.isHTML5){f=o._start(t.id,t._iO.loops||1,y===9?t._iO.position:t._iO.position/1e3,t._iO.multiShot);if(y===9&&!f){i._wD(r+t.id+": No sound hardware, or 32-sound ceiling hit");if(t._iO.onplayerror){t._iO.onplayerror.apply(t)}}}else{l();u=t._setup_html5();t.setPosition(t._iO.position);u.play()}}return t};this.start=this.play;this.stop=function(e){var n=t._iO,r;if(t.playState===1){t._onbufferchange(0);t._resetOnPosition(0);t.paused=false;if(!t.isHTML5){t.playState=0}v();if(n.to){t.clearOnPosition(n.to)}if(!t.isHTML5){o._stop(t.id,e);if(n.serverURL){t.unload()}}else{if(t._a){r=t.position;t.setPosition(0);t.position=r;t._a.pause();t.playState=0;t._onTimer();a()}}t.instanceCount=0;t._iO={};if(n.onstop){n.onstop.apply(t)}}return t};this.setAutoPlay=function(e){i._wD("sound "+t.id+" turned autoplay "+(e?"on":"off"));t._iO.autoPlay=e;if(!t.isHTML5){o._setAutoPlay(t.id,e);if(e){if(!t.instanceCount&&t.readyState===1){t.instanceCount++;i._wD("sound "+t.id+" incremented instance count to "+t.instanceCount)}}}};this.getAutoPlay=function(){return t._iO.autoPlay};this.setPosition=function(e){if(e===undefined){e=0}var n,r,s,u=t.isHTML5?Math.max(e,0):Math.min(t.duration||t._iO.duration,Math.max(e,0));n=t.position;t.position=u;s=t.position/1e3;t._resetOnPosition(t.position);t._iO.position=u;if(!t.isHTML5){r=y===9?t.position:s;if(t.readyState&&t.readyState!==2){o._setPosition(t.id,r,t.paused||!t.playState,t._iO.multiShot)}}else if(t._a){if(t._html5_canplay){if(t._a.currentTime!==s){i._wD("setPosition("+s+"): setting position");try{t._a.currentTime=s;if(t.playState===0||t.paused){t._a.pause()}}catch(a){i._wD("setPosition("+s+"): setting position failed: "+a.message,2)}}}else{i._wD("setPosition("+s+"): delaying, sound not ready")}}if(t.isHTML5){if(t.paused){t._onTimer(true)}}return t};this.pause=function(e){if(t.paused||t.playState===0&&t.readyState!==1){return t}i._wD("SMSound.pause()");t.paused=true;if(!t.isHTML5){if(e||e===undefined){o._pause(t.id,t._iO.multiShot)}}else{t._setup_html5().pause();a()}if(t._iO.onpause){t._iO.onpause.apply(t)}return t};this.resume=function(){var e=t._iO;if(!t.paused){return t}i._wD("SMSound.resume()");t.paused=false;t.playState=1;if(!t.isHTML5){if(e.isMovieStar&&!e.serverURL){t.setPosition(t.position)}o._pause(t.id,e.multiShot)}else{t._setup_html5().play();l()}if(!h&&e.onplay){e.onplay.apply(t);h=true}else if(e.onresume){e.onresume.apply(t)}return t};this.togglePause=function(){i._wD("SMSound.togglePause()");if(t.playState===0){t.play({position:y===9&&!t.isHTML5?t.position:t.position/1e3});return t}if(t.paused){t.resume()}else{t.pause()}return t};this.setPan=function(e,n){if(e===undefined){e=0}if(n===undefined){n=false}if(!t.isHTML5){o._setPan(t.id,e)}t._iO.pan=e;if(!n){t.pan=e;t.options.pan=e}return t};this.setVolume=function(e,n){if(e===undefined){e=100}if(n===undefined){n=false}if(!t.isHTML5){o._setVolume(t.id,i.muted&&!t.muted||t.muted?0:e)}else if(t._a){t._a.volume=Math.max(0,Math.min(1,e/100))}t._iO.volume=e;if(!n){t.volume=e;t.options.volume=e}return t};this.mute=function(){t.muted=true;if(!t.isHTML5){o._setVolume(t.id,0)}else if(t._a){t._a.muted=true}return t};this.unmute=function(){t.muted=false;var e=t._iO.volume!==undefined;if(!t.isHTML5){o._setVolume(t.id,e?t._iO.volume:t.options.volume)}else if(t._a){t._a.muted=false}return t};this.toggleMute=function(){return t.muted?t.unmute():t.mute()};this.onPosition=function(e,n,r){p.push({position:parseInt(e,10),method:n,scope:r!==undefined?r:t,fired:false});return t};this.onposition=this.onPosition;this.clearOnPosition=function(e,t){var n;e=parseInt(e,10);if(isNaN(e)){return false}for(n=0;n<p.length;n++){if(e===p[n].position){if(!t||t===p[n].method){if(p[n].fired){d--}p.splice(n,1)}}}};this._processOnPosition=function(){var e,n,r=p.length;if(!r||!t.playState||d>=r){return false}for(e=r-1;e>=0;e--){n=p[e];if(!n.fired&&t.position>=n.position){n.fired=true;d++;n.method.apply(n.scope,[n.position])}}return true};this._resetOnPosition=function(e){var t,n,r=p.length;if(!r){return false}for(t=r-1;t>=0;t--){n=p[t];if(n.fired&&e<=n.position){n.fired=false;d--}}return true};m=function(){var e=t._iO,n=e.from,r=e.to,s,o;o=function(){i._wD(t.id+': "to" time of '+r+" reached.");t.clearOnPosition(r,o);t.stop()};s=function(){i._wD(t.id+': playing "from" '+n);if(r!==null&&!isNaN(r)){t.onPosition(r,o)}};if(n!==null&&!isNaN(n)){e.position=n;e.multiShot=false;s()}return e};c=function(){var e,n=t._iO.onposition;if(n){for(e in n){if(n.hasOwnProperty(e)){t.onPosition(parseInt(e,10),n[e])}}}};v=function(){var e,n=t._iO.onposition;if(n){for(e in n){if(n.hasOwnProperty(e)){t.clearOnPosition(parseInt(e,10))}}}};l=function(){if(t.isHTML5){dt(t)}};a=function(){if(t.isHTML5){vt(t)}};n=function(e){if(!e){p=[];d=0}h=false;t._hasTimer=null;t._a=null;t._html5_canplay=false;t.bytesLoaded=null;t.bytesTotal=null;t.duration=t._iO&&t._iO.duration?t._iO.duration:null;t.durationEstimate=null;t.buffered=[];t.eqData=[];t.eqData.left=[];t.eqData.right=[];t.failures=0;t.isBuffering=false;t.instanceOptions={};t.instanceCount=0;t.loaded=false;t.metadata={};t.readyState=0;t.muted=false;t.paused=false;t.peakData={left:0,right:0};t.waveformData={left:[],right:[]};t.playState=0;t.position=null;t.id3={}};n();this._onTimer=function(e){var n,r=false,i,s={};if(t._hasTimer||e){if(t._a&&(e||(t.playState>0||t.readyState===1)&&!t.paused)){n=t._get_html5_duration();if(n!==b.duration){b.duration=n;t.duration=n;r=true}t.durationEstimate=t.duration;i=t._a.currentTime*1e3||0;if(i!==b.time){b.time=i;r=true}if(r||e){t._whileplaying(i,s,s,s,s)}}return r}};this._get_html5_duration=function(){var e=t._iO,n=t._a&&t._a.duration?t._a.duration*1e3:e&&e.duration?e.duration:null,r=n&&!isNaN(n)&&n!==Infinity?n:null;return r};this._apply_loop=function(e,t){if(!e.loop&&t>1){i._wD("Note: Native HTML5 looping is infinite.")}e.loop=t>1?"loop":""};this._setup_html5=function(e){var i=O(t._iO,e),o=decodeURI,u=Ot?s:t._a,a=o(i.url),f;if(Ot){if(a===Mt){f=true}}else if(a===g){f=true}if(u){if(u._s){if(Ot){if(u._s&&u._s.playState&&!f){u._s.stop()}}else if(!Ot&&a===o(g)){t._apply_loop(u,i.loops);return u}}if(!f){n(false);u.src=i.url;t.url=i.url;g=i.url;Mt=i.url;u._called_load=false}}else{k("h5a");if(i.autoLoad||i.autoPlay){t._a=new Audio(i.url)}else{t._a=Rt&&opera.version()<10?new Audio(null):new Audio}u=t._a;u._called_load=false;if(Ot){s=u}}t.isHTML5=true;t._a=u;u._s=t;r();t._apply_loop(u,i.loops);if(i.autoLoad||i.autoPlay){t.load()}else{u.autobuffer=false;u.preload="auto"}return u};r=function(){function n(e,n,r){return t._a?t._a.addEventListener(e,n,r||false):null}if(t._a._added_events){return false}var e;t._a._added_events=true;for(e in Ht){if(Ht.hasOwnProperty(e)){n(e,Ht[e])}}return true};u=function(){function n(e,n,r){return t._a?t._a.removeEventListener(e,n,r||false):null}var e;i._wD(f+"removing event listeners: "+t.id);t._a._added_events=false;for(e in Ht){if(Ht.hasOwnProperty(e)){n(e,Ht[e])}}};this._onload=function(e){var n,r=!!e||!t.isHTML5&&y===8&&t.duration;n="SMSound._onload(): ";i._wD(n+'"'+t.id+'"'+(r?" loaded.":" failed to load? - "+t.url),r?1:2);if(!r&&!t.isHTML5){if(i.sandbox.noRemote===true){i._wD(n+rt("noNet"),1)}if(i.sandbox.noLocal===true){i._wD(n+rt("noLocal"),1)}}t.loaded=r;t.readyState=r?3:2;t._onbufferchange(0);if(t._iO.onload){t._iO.onload.apply(t,[r])}return true};this._onbufferchange=function(e){if(t.playState===0){return false}if(e&&t.isBuffering||!e&&!t.isBuffering){return false}t.isBuffering=e===1;if(t._iO.onbufferchange){i._wD("SMSound._onbufferchange(): "+e);t._iO.onbufferchange.apply(t)}return true};this._onsuspend=function(){if(t._iO.onsuspend){i._wD("SMSound._onsuspend()");t._iO.onsuspend.apply(t)}return true};this._onfailure=function(e,n,r){t.failures++;i._wD('SMSound._onfailure(): "'+t.id+'" count '+t.failures);if(t._iO.onfailure&&t.failures===1){t._iO.onfailure(t,e,n,r)}else{i._wD("SMSound._onfailure(): ignoring")}};this._onfinish=function(){var e=t._iO.onfinish;t._onbufferchange(0);t._resetOnPosition(0);if(t.instanceCount){t.instanceCount--;if(!t.instanceCount){v();t.playState=0;t.paused=false;t.instanceCount=0;t.instanceOptions={};t._iO={};a();if(t.isHTML5){t.position=0}}if(!t.instanceCount||t._iO.multiShotEvents){if(e){i._wD('SMSound._onfinish(): "'+t.id+'"');e.apply(t)}}}};this._whileloading=function(e,n,r,i){var s=t._iO;t.bytesLoaded=e;t.bytesTotal=n;t.duration=Math.floor(r);t.bufferLength=i;if(!t.isHTML5&&!s.isMovieStar){if(s.duration){t.durationEstimate=t.duration>s.duration?t.duration:s.duration}else{t.durationEstimate=parseInt(t.bytesTotal/t.bytesLoaded*t.duration,10)}}else{t.durationEstimate=t.duration}if(!t.isHTML5){t.buffered=[{start:0,end:t.duration}]}if((t.readyState!==3||t.isHTML5)&&s.whileloading){s.whileloading.apply(t)}};this._whileplaying=function(e,n,r,i,s){var o=t._iO,u;if(isNaN(e)||e===null){return false}t.position=Math.max(0,e);t._processOnPosition();if(!t.isHTML5&&y>8){if(o.usePeakData&&n!==undefined&&n){t.peakData={left:n.leftPeak,right:n.rightPeak}}if(o.useWaveformData&&r!==undefined&&r){t.waveformData={left:r.split(","),right:i.split(",")}}if(o.useEQData){if(s!==undefined&&s&&s.leftEQ){u=s.leftEQ.split(",");t.eqData=u;t.eqData.left=u;if(s.rightEQ!==undefined&&s.rightEQ){t.eqData.right=s.rightEQ.split(",")}}}}if(t.playState===1){if(!t.isHTML5&&y===8&&!t.position&&t.isBuffering){t._onbufferchange(0)}if(o.whileplaying){o.whileplaying.apply(t)}}return true};this._oncaptiondata=function(e){i._wD('SMSound._oncaptiondata(): "'+this.id+'" caption data received.');t.captiondata=e;if(t._iO.oncaptiondata){t._iO.oncaptiondata.apply(t,[e])}};this._onmetadata=function(e,n){i._wD('SMSound._onmetadata(): "'+this.id+'" metadata received.');var r={},s,o;for(s=0,o=e.length;s<o;s++){r[e[s]]=n[s]}t.metadata=r;if(t._iO.onmetadata){t._iO.onmetadata.apply(t)}};this._onid3=function(e,n){i._wD('SMSound._onid3(): "'+this.id+'" ID3 data received.');var r=[],s,o;for(s=0,o=e.length;s<o;s++){r[e[s]]=n[s]}t.id3=O(t.id3,r);if(t._iO.onid3){t._iO.onid3.apply(t)}};this._onconnect=function(e){e=e===1;i._wD('SMSound._onconnect(): "'+t.id+'"'+(e?" connected.":" failed to connect? - "+t.url),e?1:2);t.connected=e;if(e){t.failures=0;if(ct(t.id)){if(t.getAutoPlay()){t.play(undefined,t.getAutoPlay())}else if(t._iO.autoLoad){t.load()}}if(t._iO.onconnect){t._iO.onconnect.apply(t,[e])}}};this._ondataerror=function(e){if(t.playState>0){i._wD("SMSound._ondataerror(): "+e);if(t._iO.ondataerror){t._iO.ondataerror.apply(t)}}}};X=function(){return d.body||d._docElement||d.getElementsByTagName("div")[0]};l=function(e){return d.getElementById(e)};O=function(e,t){var n=e||{},r,s;r=t===undefined?i.defaultOptions:t;for(s in r){if(r.hasOwnProperty(s)&&n[s]===undefined){if(typeof r[s]!=="object"||r[s]===null){n[s]=r[s]}else{n[s]=O(n[s],r[s])}}}return n};_={onready:1,ontimeout:1,defaultOptions:1,flash9Options:1,movieStarOptions:1};M=function(e,t){var n,r=true,s=t!==undefined,o=i.setupOptions,u=_;if(e===undefined){r=[];for(n in o){if(o.hasOwnProperty(n)){r.push(n)}}for(n in u){if(u.hasOwnProperty(n)){if(typeof i[n]==="object"){r.push(n+": {...}")}else if(i[n]instanceof Function){r.push(n+": function() {...}")}else{r.push(n)}}}i._wD(rt("setup",r.join(", ")));return false}for(n in e){if(e.hasOwnProperty(n)){if(typeof e[n]!=="object"||e[n]===null||e[n]instanceof Array){if(s&&u[t]!==undefined){i[t][n]=e[n]}else if(o[n]!==undefined){i.setupOptions[n]=e[n];i[n]=e[n]}else if(u[n]===undefined){lt(rt(i[n]===undefined?"setupUndef":"setupError",n),2);r=false}else{if(i[n]instanceof Function){i[n].apply(i,e[n]instanceof Array?e[n]:[e[n]])}else{i[n]=e[n]}}}else{if(u[n]===undefined){lt(rt(i[n]===undefined?"setupUndef":"setupError",n),2);r=false}else{return M(e[n],n)}}}}return r};Lt=function(){function n(t){var n=At.call(t),r=n.length;if(e){n[1]="on"+n[1];if(r>3){n.pop()}}else if(r===3){n.push(false)}return n}function r(n,r){var i=n.shift(),s=[t[r]];if(e){i[s](n[0],n[1])}else{i[s].apply(i,n)}}function i(){r(n(arguments),"add")}function s(){r(n(arguments),"remove")}var e=h.attachEvent,t={add:e?"attachEvent":"addEventListener",remove:e?"detachEvent":"removeEventListener"};return{add:i,remove:s}}();Ht={abort:nn(function(){i._wD(f+"abort: "+this._s.id)}),canplay:nn(function(){var e=this._s,t;if(e._html5_canplay){return true}e._html5_canplay=true;i._wD(f+"canplay: "+e.id+", "+e.url);e._onbufferchange(0);t=e._iO.position!==undefined&&!isNaN(e._iO.position)?e._iO.position/1e3:null;if(e.position&&this.currentTime!==t){i._wD(f+"canplay: setting position to "+t);try{this.currentTime=t}catch(n){i._wD(f+"setting position of "+t+" failed: "+n.message,2)}}if(e._iO._oncanplay){e._iO._oncanplay()}}),canplaythrough:nn(function(){var e=this._s;if(!e.loaded){e._onbufferchange(0);e._whileloading(e.bytesLoaded,e.bytesTotal,e._get_html5_duration());e._onload(true)}}),ended:nn(function(){var e=this._s;i._wD(f+"ended: "+e.id);e._onfinish()}),error:nn(function(){i._wD(f+"error: "+this.error.code);this._s._onload(false)}),loadeddata:nn(function(){var e=this._s;i._wD(f+"loadeddata: "+e.id);if(!e._loaded&&!qt){e.duration=e._get_html5_duration()}}),loadedmetadata:nn(function(){i._wD(f+"loadedmetadata: "+this._s.id)}),loadstart:nn(function(){i._wD(f+"loadstart: "+this._s.id);this._s._onbufferchange(1)}),play:nn(function(){i._wD(f+"play: "+this._s.id+", "+this._s.url);this._s._onbufferchange(0)}),playing:nn(function(){i._wD(f+"playing: "+this._s.id);this._s._onbufferchange(0)}),progress:nn(function(e){var t=this._s,n,r,s,o=0,u=e.type==="progress",a=e.target.buffered,l=e.loaded||0,c=e.total||1,h=1e3;t.buffered=[];if(a&&a.length){for(n=0,r=a.length;n<r;n++){t.buffered.push({start:a.start(n)*h,end:a.end(n)*h})}o=(a.end(0)-a.start(0))*h;l=o/(e.target.duration*h);if(u&&a.length>1){s=[];r=a.length;for(n=0;n<r;n++){s.push(e.target.buffered.start(n)*h+"-"+e.target.buffered.end(n)*h)}i._wD(f+"progress: timeRanges: "+s.join(", "))}if(u&&!isNaN(l)){i._wD(f+"progress: "+t.id+": "+Math.floor(l*100)+"% loaded")}}if(!isNaN(l)){t._onbufferchange(0);t._whileloading(l,c,t._get_html5_duration());if(l&&c&&l===c){Ht.canplaythrough.call(this,e)}}}),ratechange:nn(function(){i._wD(f+"ratechange: "+this._s.id)}),suspend:nn(function(e){var t=this._s;i._wD(f+"suspend: "+t.id);Ht.progress.call(this,e);t._onsuspend()}),stalled:nn(function(){i._wD(f+"stalled: "+this._s.id)}),timeupdate:nn(function(){this._s._onTimer()}),waiting:nn(function(){var e=this._s;i._wD(f+"waiting: "+e.id);e._onbufferchange(1)})};St=function(e){var t;if(e.serverURL||e.type&&tn(e.type)){t=false}else{t=e.type?xt({type:e.type}):xt({url:e.url})||i.html5Only}return t};Nt=function(e,t){if(e){e.src=t}};xt=function(e){if(!i.useHTML5Audio||!i.hasHTML5){return false}var t=e.url||null,n=e.type||null,r=i.audioFormats,s,o,u,a;if(n&&i.html5[n]!==undefined){return i.html5[n]&&!tn(n)}if(!Tt){Tt=[];for(a in r){if(r.hasOwnProperty(a)){Tt.push(a);if(r[a].related){Tt=Tt.concat(r[a].related)}}}Tt=new RegExp("\\.("+Tt.join("|")+")(\\?.*)?$","i")}u=t?t.toLowerCase().match(Tt):null;if(!u||!u.length){if(!n){s=false}else{o=n.indexOf(";");u=(o!==-1?n.substr(0,o):n).substr(6)}}else{u=u[1]}if(u&&i.html5[u]!==undefined){s=i.html5[u]&&!tn(u)}else{n="audio/"+u;s=i.html5.canPlayType({type:n});i.html5[u]=s;s=s&&i.html5[n]&&!tn(n)}return s};kt=function(){function u(t){var n,r,s,o=false,u=false;if(!e||typeof e.canPlayType!=="function"){return o}if(t instanceof Array){for(r=0,s=t.length;r<s;r++){if(i.html5[t[r]]||e.canPlayType(t[r]).match(i.html5Test)){u=true;i.html5[t[r]]=true;i.flash[t[r]]=!!t[r].match(Jt)}}o=u}else{n=e&&typeof e.canPlayType==="function"?e.canPlayType(t):false;o=!!(n&&n.match(i.html5Test))}return o}if(!i.useHTML5Audio||!i.hasHTML5){return false}var e=Audio!==undefined?Rt&&opera.version()<10?new Audio(null):new Audio:null,t,n,r={},s,o;s=i.audioFormats;for(t in s){if(s.hasOwnProperty(t)){n="audio/"+t;r[t]=u(s[t].type);r[n]=r[t];if(t.match(Jt)){i.flash[t]=true;i.flash[n]=true}else{i.flash[t]=false;i.flash[n]=false}if(s[t]&&s[t].related){for(o=s[t].related.length-1;o>=0;o--){r["audio/"+s[t].related[o]]=r[t];i.html5[s[t].related[o]]=r[t];i.flash[s[t].related[o]]=r[t]}}}}r.canPlayType=e?u:null;i.html5=O(i.html5,r);return true};q={notReady:"Not loaded yet - wait for soundManager.onready()",notOK:"Audio support is not available.",domError:a+"createMovie(): appendChild/innerHTML call failed. DOM not ready or other error.",spcWmode:a+"createMovie(): Removing wmode, preventing known SWF loading issue(s)",swf404:u+": Verify that %s is a valid path.",tryDebug:"Try "+u+".debugFlash = true for more security details (output goes to SWF.)",checkSWF:"See SWF output for more debug info.",localFail:u+": Non-HTTP page ("+d.location.protocol+" URL?) Review Flash player security settings for this special case:\nhttp://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html\nMay need to add/allow path, eg. c:/sm2/ or /users/me/sm2/",waitFocus:u+": Special case: Waiting for SWF to load with window focus...",waitImpatient:u+": Getting impatient, still waiting for Flash%s...",waitForever:u+": Waiting indefinitely for Flash (will recover if unblocked)...",waitSWF:u+": Retrying, waiting for 100% SWF load...",needFunction:u+": Function object expected for %s",badID:'Warning: Sound ID "%s" should be a string, starting with a non-numeric character',currentObj:"--- "+u+"._debug(): Current sound objects ---",waitEI:a+"initMovie(): Waiting for ExternalInterface call from Flash...",waitOnload:u+": Waiting for window.onload()",docLoaded:u+": Document already loaded",onload:a+"initComplete(): calling soundManager.onload()",onloadOK:u+".onload() complete",init:a+"init()",didInit:a+"init(): Already called?",flashJS:u+": Attempting JS to Flash call...",secNote:"Flash security note: Network/internet URLs will not load due to security restrictions. Access can be configured via Flash Player Global Security Settings Page: http://www.macromedia.com/support/documentation/en/flashplayer/help/settings_manager04.html",badRemove:"Warning: Failed to remove flash movie.",shutdown:u+".disable(): Shutting down",queue:u+": Queueing %s handler",smFail:u+": Failed to initialise.",smError:"SMSound.load(): Exception: JS-Flash communication failed, or JS error.",fbTimeout:"No flash response, applying ."+ot.swfTimedout+" CSS...",fbLoaded:"Flash loaded",fbHandler:a+"flashBlockHandler()",manURL:"SMSound.load(): Using manually-assigned URL",onURL:u+".load(): current URL already assigned.",badFV:u+'.flashVersion must be 8 or 9. "%s" is invalid. Reverting to %s.',as2loop:"Note: Setting stream:false so looping can work (flash 8 limitation)",noNSLoop:"Note: Looping not implemented for MovieStar formats",needfl9:"Note: Switching to flash 9, required for MP4 formats.",mfTimeout:"Setting flashLoadTimeout = 0 (infinite) for off-screen, mobile flash case",needFlash:u+": Fatal error: Flash is needed to play some required formats, but is not available.",gotFocus:u+": Got window focus.",mfOn:"mobileFlash::enabling on-screen flash repositioning",policy:"Enabling usePolicyFile for data access",setup:u+".setup(): allowed parameters: %s",setupError:u+'.setup(): "%s" cannot be assigned with this method.',setupUndef:u+'.setup(): Could not find option "%s"',setupLate:u+".setup(): url + flashVersion changes will not take effect until reboot().",h5a:"creating HTML5 Audio() object",noURL:u+": Flash URL required. Call soundManager.setup({url:...}) to get started."};rt=function(){var e=At.call(arguments),t=e.shift(),n=q&&q[t]?q[t]:"",r,i;if(n&&e&&e.length){for(r=0,i=e.length;r<i;r++){n=n.replace("%s",e[r])}}return n};at=function(e){if(y===8&&e.loops>1&&e.stream){k("as2loop");e.stream=false}return e};ft=function(e,t){if(e&&!e.usePolicyFile&&(e.onid3||e.usePeakData||e.useWaveformData||e.useEQData)){i._wD((t||"")+rt("policy"));e.usePolicyFile=true}return e};lt=function(e){if(console!==undefined&&console.warn!==undefined){console.warn(e)}else{i._wD(e)}};v=function(){return false};Y=function(e){var t;for(t in e){if(e.hasOwnProperty(t)&&typeof e[t]==="function"){e[t]=v}}t=null};Z=function(e){if(e===undefined){e=false}if(N||e){k("smFail",2);i.disable(e)}};et=function(e){var t=null,n;if(e){if(e.match(/\.swf(\?.*)?$/i)){t=e.substr(e.toLowerCase().lastIndexOf(".swf?")+4);if(t){return e}}else if(e.lastIndexOf("/")!==e.length-1){e+="/"}}n=(e&&e.lastIndexOf("/")!==-1?e.substr(0,e.lastIndexOf("/")+1):"./")+i.movieURL;if(i.noSWFCache){n+="?ts="+(new Date).getTime()}return n};F=function(){y=parseInt(i.flashVersion,10);if(y!==8&&y!==9){i._wD(rt("badFV",y,G));i.flashVersion=y=G}var e=i.debugMode||i.debugFlash?"_debug.swf":".swf";if(i.useHTML5Audio&&!i.html5Only&&i.audioFormats.mp4.required&&y<9){i._wD(rt("needfl9"));i.flashVersion=y=9}i.version=i.versionNumber+(i.html5Only?" (HTML5-only mode)":y===9?" (AS3/Flash 9)":" (AS2/Flash 8)");if(y>8){i.defaultOptions=O(i.defaultOptions,i.flash9Options);i.features.buffering=true;i.defaultOptions=O(i.defaultOptions,i.movieStarOptions);i.filePatterns.flash9=new RegExp("\\.(mp3|"+Zt.join("|")+")(\\?.*)?$","i");i.features.movieStar=true}else{i.features.movieStar=false}i.filePattern=i.filePatterns[y!==8?"flash9":"flash8"];i.movieURL=(y===8?"soundmanager2.swf":"soundmanager2_flash9.swf").replace(".swf",e);i.features.peakData=i.features.waveformData=i.features.eqData=y>8};J=function(e,t){if(!o){return false}o._setPolling(e,t)};K=function(){if(i.debugURLParam.test(p)){i.debugMode=true}if(l(i.debugID)){return false}var e,t,n,r,s;if(i.debugMode&&!l(i.debugID)&&(!Wt||!i.useConsole||!i.consoleOnly)){e=d.createElement("div");e.id=i.debugID+"-toggle";r={position:"fixed",bottom:"0px",right:"0px",width:"1.2em",height:"1.2em",lineHeight:"1.2em",margin:"2px",textAlign:"center",border:"1px solid #999",cursor:"pointer",background:"#fff",color:"#333",zIndex:10001};e.appendChild(d.createTextNode("-"));e.onclick=ut;e.title="Toggle SM2 debug console";if(c.match(/msie 6/i)){e.style.position="absolute";e.style.cursor="hand"}for(s in r){if(r.hasOwnProperty(s)){e.style[s]=r[s]}}t=d.createElement("div");t.id=i.debugID;t.style.display=i.debugMode?"block":"none";if(i.debugMode&&!l(e.id)){try{n=X();n.appendChild(e)}catch(o){throw new Error(rt("domError")+" \n"+o.toString())}n.appendChild(t)}}n=null};ct=this.getSoundById;k=function(e,t){return!e?"":i._wD(rt(e),t)};if(p.indexOf("sm2-debug=alert")+1&&i.debugMode){i._wD=function(t){e.alert(t)}}ut=function(){var e=l(i.debugID),t=l(i.debugID+"-toggle");if(!e){return false}if(w){t.innerHTML="+";e.style.display="none"}else{t.innerHTML="-";e.style.display="block"}w=!w};E=function(e,t,n){if(h.sm2Debugger!==undefined){try{sm2Debugger.handleEvent(e,t,n)}catch(r){}}return true};st=function(){var e=[];if(i.debugMode){e.push(ot.sm2Debug)}if(i.debugFlash){e.push(ot.flashDebug)}if(i.useHighPerformance){e.push(ot.highPerf)}return e.join(" ")};it=function(){var e=rt("fbHandler"),t=i.getMoviePercent(),n=ot,r={type:"FLASHBLOCK"};if(i.html5Only){return false}if(!i.ok()){if(wt){i.oMC.className=st()+" "+n.swfDefault+" "+(t===null?n.swfTimedout:n.swfError);i._wD(e+": "+rt("fbTimeout")+(t?" ("+rt("fbLoaded")+")":""))}i.didFlashBlock=true;P({type:"ontimeout",ignoreInit:true,error:r});$(r)}else{if(i.didFlashBlock){i._wD(e+": Unblocked")}if(i.oMC){i.oMC.className=[st(),n.swfDefault,n.swfLoaded+(i.didFlashBlock?" "+n.swfUnblocked:"")].join(" ")}}};D=function(e,t,n){if(b[e]===undefined){b[e]=[]}b[e].push({method:t,scope:n||null,fired:false})};P=function(e){if(!e){e={type:i.ok()?"onready":"ontimeout"}}if(!T&&e&&!e.ignoreInit){return false}if(e.type==="ontimeout"&&(i.ok()||N&&!e.ignoreInit)){return false}var t={success:e&&e.ignoreInit?i.ok():!N},n=e&&e.type?b[e.type]||[]:[],r=[],s,o,a=[t],f=wt&&i.useFlashBlock&&!i.ok();if(e.error){a[0].error=e.error}for(s=0,o=n.length;s<o;s++){if(n[s].fired!==true){r.push(n[s])}}if(r.length){i._wD(u+": Firing "+r.length+" "+e.type+"() item"+(r.length===1?"":"s"));for(s=0,o=r.length;s<o;s++){if(r[s].scope){r[s].method.apply(r[s].scope,a)}else{r[s].method.apply(this,a)}if(!f){r[s].fired=true}}}return true};H=function(){h.setTimeout(function(){if(i.useFlashBlock){it()}P();if(typeof i.onload==="function"){k("onload",1);i.onload.apply(h);k("onloadOK",1)}if(i.waitForWindowLoad){Lt.add(h,"load",H)}},1)};Dt=function(){if(_t!==undefined){return _t}var e=false,t=navigator,n=t.plugins,r,i,s,o=h.ActiveXObject;if(n&&n.length){i="application/x-shockwave-flash";s=t.mimeTypes;if(s&&s[i]&&s[i].enabledPlugin&&s[i].enabledPlugin.description){e=true}}else if(o!==undefined&&!c.match(/MSAppHost/i)){try{r=new o("ShockwaveFlash.ShockwaveFlash")}catch(u){}e=!!r;r=null}_t=e;return e};Et=function(){var e,t,n=true,r=i.audioFormats,s=jt&&!!c.match(/os (1|2|3_0|3_1)/i);if(s){i.hasHTML5=false;i.html5Only=true;if(i.oMC){i.oMC.style.display="none"}n=false}else{if(i.useHTML5Audio){if(!i.html5||!i.html5.canPlayType){i._wD("SoundManager: No HTML5 Audio() support detected.");i.hasHTML5=false}if(zt){i._wD(a+"Note: Buggy HTML5 Audio in Safari on this OS X release, see https://bugs.webkit.org/show_bug.cgi?id=32159 - "+(!_t?" would use flash fallback for MP3/MP4, but none detected.":"will use flash fallback for MP3/MP4, if available"),1)}}}if(i.useHTML5Audio&&i.hasHTML5){for(t in r){if(r.hasOwnProperty(t)){if(r[t].required&&!i.html5.canPlayType(r[t].type)||i.preferFlash&&(i.flash[t]||i.flash[r[t].type])){e=true}}}}if(i.ignoreFlash){e=false}i.html5Only=i.hasHTML5&&i.useHTML5Audio&&!e;return!i.html5Only};bt=function(e){var t,n,r=0,s;if(e instanceof Array){for(t=0,n=e.length;t<n;t++){if(e[t]instanceof Object){if(i.canPlayMIME(e[t].type)){r=t;break}}else if(i.canPlayURL(e[t])){r=t;break}}if(e[r].url){e[r]=e[r].url}s=e[r]}else{s=e}return s};dt=function(e){if(!e._hasTimer){e._hasTimer=true;if(!Ut&&i.html5PollingInterval){if(yt===null&&gt===0){yt=h.setInterval(mt,i.html5PollingInterval)}gt++}}};vt=function(e){if(e._hasTimer){e._hasTimer=false;if(!Ut&&i.html5PollingInterval){gt--}}};mt=function(){var e;if(yt!==null&&!gt){h.clearInterval(yt);yt=null;return false}for(e=i.soundIDs.length-1;e>=0;e--){if(i.sounds[i.soundIDs[e]].isHTML5&&i.sounds[i.soundIDs[e]]._hasTimer){i.sounds[i.soundIDs[e]]._onTimer()}}};$=function(e){e=e!==undefined?e:{};if(typeof i.onerror==="function"){i.onerror.apply(h,[{type:e.type!==undefined?e.type:null}])}if(e.fatal!==undefined&&e.fatal){i.disable()}};Pt=function(){if(!zt||!Dt()){return false}var e=i.audioFormats,t,n;for(n in e){if(e.hasOwnProperty(n)){if(n==="mp3"||n==="mp4"){i._wD(u+": Using flash fallback for "+n+" format");i.html5[n]=false;if(e[n]&&e[n].related){for(t=e[n].related.length-1;t>=0;t--){i.html5[e[n].related[t]]=false}}}}}};this._setSandboxType=function(e){var t=i.sandbox;t.type=e;t.description=t.types[t.types[e]!==undefined?e:"unknown"];i._wD("Flash security sandbox type: "+t.type);if(t.type==="localWithFile"){t.noRemote=true;t.noLocal=false;k("secNote",2)}else if(t.type==="localWithNetwork"){t.noRemote=false;t.noLocal=true}else if(t.type==="localTrusted"){t.noRemote=false;t.noLocal=false}};this._externalInterfaceOK=function(e,t){if(i.swfLoaded){return false}var n,r=(new Date).getTime();i._wD(a+"externalInterfaceOK()"+(e?" (~"+(r-e)+" ms)":""));E("swf",true);E("flashtojs",true);i.swfLoaded=true;Vt=false;if(zt){Pt()}if(!t||t.replace(/\+dev/i,"")!==i.versionNumber.replace(/\+dev/i,"")){n=u+': Fatal: JavaScript file build "'+i.versionNumber+'" does not match Flash SWF build "'+t+'" at '+i.url+". Ensure both are up-to-date.";setTimeout(function(){throw new Error(n)},0);return false}setTimeout(g,Ft?100:1)};V=function(e,t){function n(){i._wD("-- SoundManager 2 "+i.version+(!i.html5Only&&i.useHTML5Audio?i.hasHTML5?" + HTML5 audio":", no HTML5 audio support":"")+(!i.html5Only?(i.useHighPerformance?", high performance mode, ":", ")+((i.flashPollingInterval?"custom ("+i.flashPollingInterval+"ms)":"normal")+" polling")+(i.wmode?", wmode: "+i.wmode:"")+(i.debugFlash?", flash debug mode":"")+(i.useFlashBlock?", flashBlock mode":""):"")+" --",1)}function C(e,t){return'<param name="'+e+'" value="'+t+'" />'}if(S&&x){return false}if(i.html5Only){F();n();i.oMC=l(i.movieID);g();S=true;x=true;return false}var r=t||i.url,s=i.altURL||r,o="JS/Flash audio component (SoundManager 2)",u=X(),f=st(),h=null,p=d.getElementsByTagName("html")[0],v,m,y,b,w,E,T,N;h=p&&p.dir&&p.dir.match(/rtl/i);e=e===undefined?i.id:e;F();i.url=et(Qt?r:s);t=i.url;i.wmode=!i.wmode&&i.useHighPerformance?"transparent":i.wmode;if(i.wmode!==null&&(c.match(/msie 8/i)||!Ft&&!i.useHighPerformance)&&navigator.platform.match(/win32|win64/i)){k("spcWmode");i.wmode=null}v={name:e,id:e,src:t,quality:"high",allowScriptAccess:i.allowScriptAccess,bgcolor:i.bgColor,pluginspage:Gt+"www.macromedia.com/go/getflashplayer",title:o,type:"application/x-shockwave-flash",wmode:i.wmode,hasPriority:"true"};if(i.debugFlash){v.FlashVars="debug=1"}if(!i.wmode){delete v.wmode}if(Ft){m=d.createElement("div");b=['<object id="'+e+'" data="'+t+'" type="'+v.type+'" title="'+v.title+'" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="'+Gt+'download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,40,0">',C("movie",t),C("AllowScriptAccess",i.allowScriptAccess),C("quality",v.quality),i.wmode?C("wmode",i.wmode):"",C("bgcolor",i.bgColor),C("hasPriority","true"),i.debugFlash?C("FlashVars",v.FlashVars):"","</object>"].join("")}else{m=d.createElement("embed");for(y in v){if(v.hasOwnProperty(y)){m.setAttribute(y,v[y])}}}K();f=st();u=X();if(u){i.oMC=l(i.movieID)||d.createElement("div");if(!i.oMC.id){i.oMC.id=i.movieID;i.oMC.className=ot.swfDefault+" "+f;E=null;w=null;if(!i.useFlashBlock){if(i.useHighPerformance){E={position:"fixed",width:"8px",height:"8px",bottom:"0px",left:"0px",overflow:"hidden"}}else{E={position:"absolute",width:"6px",height:"6px",top:"-9999px",left:"-9999px"};if(h){E.left=Math.abs(parseInt(E.left,10))+"px"}}}if(It){i.oMC.style.zIndex=1e4}if(!i.debugFlash){for(T in E){if(E.hasOwnProperty(T)){i.oMC.style[T]=E[T]}}}try{if(!Ft){i.oMC.appendChild(m)}u.appendChild(i.oMC);if(Ft){w=i.oMC.appendChild(d.createElement("div"));w.className=ot.swfBox;w.innerHTML=b}x=true}catch(L){throw new Error(rt("domError")+" \n"+L.toString())}}else{N=i.oMC.className;i.oMC.className=(N?N+" ":ot.swfDefault)+(f?" "+f:"");i.oMC.appendChild(m);if(Ft){w=i.oMC.appendChild(d.createElement("div"));w.className=ot.swfBox;w.innerHTML=b}x=true}}S=true;n();i._wD(a+"createMovie(): Trying to load "+t+(!Qt&&i.altURL?" (alternate URL)":""),1);return true};R=function(){if(i.html5Only){V();return false}if(o){return false}if(!i.url){k("noURL");return false}o=i.getMovie(i.id);if(!o){if(!tt){V(i.id,i.url)}else{if(!Ft){i.oMC.appendChild(tt)}else{i.oMC.innerHTML=nt}tt=null;S=true}o=i.getMovie(i.id)}if(o){k("waitEI")}if(typeof i.oninitmovie==="function"){setTimeout(i.oninitmovie,1)}return true};B=function(){setTimeout(j,1e3)};j=function(){var e,t=false;if(!i.url){return false}if(ht){return false}ht=true;Lt.remove(h,"load",B);if(Vt&&!Xt){k("waitFocus");return false}if(!T){e=i.getMoviePercent();i._wD(rt("waitImpatient",e>0?" (SWF "+e+"% loaded)":""));if(e>0&&e<100){t=true}}setTimeout(function(){e=i.getMoviePercent();if(t){ht=false;i._wD(rt("waitSWF"));h.setTimeout(B,1);return false}if(!T){i._wD(u+": No Flash response within expected time.\nLikely causes: "+(e===0?"Loading "+i.movieURL+" may have failed (and/or Flash "+y+"+ not present?), ":"")+"Flash blocked or JS-Flash security error."+(i.debugFlash?" "+rt("checkSWF"):""),2);if(!Qt&&e){k("localFail",2);if(!i.debugFlash){k("tryDebug",2)}}if(e===0){i._wD(rt("swf404",i.url))}E("flashtojs",false,": Timed out"+Qt?" (Check flash security or flash blockers)":" (No plugin/missing SWF?)")}if(!T&&$t){if(e===null){if(i.useFlashBlock||i.flashLoadTimeout===0){if(i.useFlashBlock){it()}k("waitForever")}else{Z(true)}}else{if(i.flashLoadTimeout===0){k("waitForever")}else{Z(true)}}}},i.flashLoadTimeout)};I=function(){function e(){Lt.remove(h,"focus",I)}if(Xt||!Vt){e();return true}$t=true;Xt=true;k("gotFocus");ht=false;B();e();return true};Bt=function(){var e,t=[];if(i.useHTML5Audio&&i.hasHTML5){for(e in i.audioFormats){if(i.audioFormats.hasOwnProperty(e)){t.push(e+": "+i.html5[e]+(!i.html5[e]&&_t&&i.flash[e]?" (using flash)":i.preferFlash&&i.flash[e]&&_t?" (preferring flash)":!i.html5[e]?" ("+(i.audioFormats[e].required?"required, ":"")+"and no flash support)":""))}}i._wD("-- SoundManager 2: HTML5 support tests ("+i.html5Test+"): "+t.join(", ")+" --",1)}};A=function(e){if(T){return false}if(i.html5Only){i._wD("-- SoundManager 2: loaded --");T=true;H();E("onload",true);return true}var t=i.useFlashBlock&&i.flashLoadTimeout&&!i.getMoviePercent(),n=true,r;if(!t){T=true;if(N){r={type:!_t&&wt?"NO_FLASH":"INIT_TIMEOUT"}}}i._wD("-- SoundManager 2 "+(N?"failed to load":"loaded")+" ("+(N?"Flash security/load error":"OK")+") --",1);if(N||e){if(i.useFlashBlock&&i.oMC){i.oMC.className=st()+" "+(i.getMoviePercent()===null?ot.swfTimedout:ot.swfError)}P({type:"ontimeout",error:r,ignoreInit:true});E("onload",false);$(r);n=false}else{E("onload",true)}if(!N){if(i.waitForWindowLoad&&!C){k("waitOnload");Lt.add(h,"load",H)}else{if(i.waitForWindowLoad&&C){k("docLoaded")}H()}}return n};m=function(){var e,t=i.setupOptions;for(e in t){if(t.hasOwnProperty(e)){if(i[e]===undefined){i[e]=t[e]}else if(i[e]!==t[e]){i.setupOptions[e]=i[e]}}}};g=function(){function e(){Lt.remove(h,"load",i.beginDelayedInit)}k("init");if(T){k("didInit");return false}if(i.html5Only){if(!T){e();i.enabled=true;A()}return true}R();try{k("flashJS");o._externalInterfaceTest(false);J(true,i.flashPollingInterval||(i.useHighPerformance?10:50));if(!i.debugMode){o._disableDebug()}i.enabled=true;E("jstoflash",true);if(!i.html5Only){Lt.add(h,"unload",v)}}catch(t){i._wD("js/flash exception: "+t.toString());E("jstoflash",false);$({type:"JS_TO_FLASH_EXCEPTION",fatal:true});Z(true);A();return false}A();e();return true};U=function(){if(W){return false}W=true;m();K();(function(){var t="sm2-usehtml5audio=",n="sm2-preferflash=",r=null,s=null,o=e.console!==undefined&&typeof console.log==="function",u=p.toLowerCase();if(u.indexOf(t)!==-1){r=u.charAt(u.indexOf(t)+t.length)==="1";if(o){console.log((r?"Enabling ":"Disabling ")+"useHTML5Audio via URL parameter")}i.setup({useHTML5Audio:r})}if(u.indexOf(n)!==-1){s=u.charAt(u.indexOf(n)+n.length)==="1";if(o){console.log((s?"Enabling ":"Disabling ")+"preferFlash via URL parameter")}i.setup({preferFlash:s})}})();if(!_t&&i.hasHTML5){i._wD("SoundManager: No Flash detected"+(!i.useHTML5Audio?", enabling HTML5.":". Trying HTML5-only mode."));i.setup({useHTML5Audio:true,preferFlash:false})}kt();i.html5.usingFlash=Et();wt=i.html5.usingFlash;Bt();if(!_t&&wt){k("needFlash");i.setup({flashLoadTimeout:1})}if(d.removeEventListener){d.removeEventListener("DOMContentLoaded",U,false)}R();return true};Ct=function(){if(d.readyState==="complete"){U();d.detachEvent("onreadystatechange",Ct)}return true};z=function(){C=true;Lt.remove(h,"load",z)};Dt();Lt.add(h,"focus",I);Lt.add(h,"load",B);Lt.add(h,"load",z);if(d.addEventListener){d.addEventListener("DOMContentLoaded",U,false)}else if(d.attachEvent){d.attachEvent("onreadystatechange",Ct)}else{E("onload",false);$({type:"NO_DOM2_EVENTS",fatal:true})}}var t=null;if(e.SM2_DEFER===undefined||!SM2_DEFER){t=new n}e.SoundManager=n;e.soundManager=t})(window)
function InlinePlayer(){var e=this;var t=this;var n=soundManager;var r=navigator.userAgent.match(/msie/i);this.playableClass="inline-playable";this.excludeClass="inline-exclude";this.links=[];this.sounds=[];this.soundsByURL=[];this.indexByURL=[];this.lastSound=null;this.soundCount=0;this.config={playNext:false,autoPlay:false};this.css={sDefault:"sm2_link",sLoading:"sm2_loading",sPlaying:"sm2_playing",sPaused:"sm2_paused"};this.addEventHandler=typeof window.addEventListener!=="undefined"?function(e,t,n){return e.addEventListener(t,n,false)}:function(e,t,n){e.attachEvent("on"+t,n)};this.removeEventHandler=typeof window.removeEventListener!=="undefined"?function(e,t,n){return e.removeEventListener(t,n,false)}:function(e,t,n){return e.detachEvent("on"+t,n)};this.classContains=function(e,t){return typeof e.className!="undefined"?e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)")):false};this.addClass=function(t,n){if(!t||!n||e.classContains(t,n))return false;t.className=(t.className?t.className+" ":"")+n};this.removeClass=function(t,n){if(!t||!n||!e.classContains(t,n))return false;t.className=t.className.replace(new RegExp("( "+n+")|("+n+")","g"),"")};this.getSoundByURL=function(t){return typeof e.soundsByURL[t]!="undefined"?e.soundsByURL[t]:null};this.isChildOfNode=function(e,t){if(!e||!e.parentNode){return false}t=t.toLowerCase();do{e=e.parentNode}while(e&&e.parentNode&&e.nodeName.toLowerCase()!=t);return e.nodeName.toLowerCase()==t?e:null};this.events={play:function(){t.removeClass(this._data.oLink,this._data.className);this._data.className=t.css.sPlaying;t.addClass(this._data.oLink,this._data.className)},stop:function(){t.removeClass(this._data.oLink,this._data.className);this._data.className=""},pause:function(){t.removeClass(this._data.oLink,this._data.className);this._data.className=t.css.sPaused;t.addClass(this._data.oLink,this._data.className)},resume:function(){t.removeClass(this._data.oLink,this._data.className);this._data.className=t.css.sPlaying;t.addClass(this._data.oLink,this._data.className)},finish:function(){t.removeClass(this._data.oLink,this._data.className);this._data.className="";if(t.config.playNext){var e=t.indexByURL[this._data.oLink.href]+1;if(e<t.links.length){t.handleClick({target:t.links[e]})}}}};this.stopEvent=function(e){if(typeof e!="undefined"&&typeof e.preventDefault!="undefined"){e.preventDefault()}else if(typeof event!="undefined"&&typeof event.returnValue!="undefined"){event.returnValue=false}return false};this.getTheDamnLink=r?function(e){return e&&e.target?e.target:window.event.srcElement}:function(e){return e.target};this.handleClick=function(t){if(typeof t.button!="undefined"&&t.button>1){return true}var r=e.getTheDamnLink(t);if(r.nodeName.toLowerCase()!="a"){r=e.isChildOfNode(r,"a");if(!r)return true}var i=r.getAttribute("href");if(!r.href||!n.canPlayLink(r)&&!e.classContains(r,e.playableClass)||e.classContains(r,e.excludeClass)){return true}var s=r.href;var o=e.getSoundByURL(s);if(o){if(o==e.lastSound){o.togglePause()}else{n._writeDebug("sound different than last sound: "+e.lastSound.id);if(e.lastSound){e.stopSound(e.lastSound)}o.togglePause()}}else{if(e.lastSound){e.stopSound(e.lastSound)}o=n.createSound({id:"inlineMP3Sound"+e.soundCount++,url:s,onplay:e.events.play,onstop:e.events.stop,onpause:e.events.pause,onresume:e.events.resume,onfinish:e.events.finish});o._data={oLink:r,className:e.css.sPlaying};e.soundsByURL[s]=o;e.sounds.push(o);o.play()}e.lastSound=o;if(typeof t!="undefined"&&typeof t.preventDefault!="undefined"){t.preventDefault()}else{event.returnValue=false}return false};this.stopSound=function(e){soundManager.stop(e.id);soundManager.unload(e.id)};this.init=function(){n._writeDebug("inlinePlayer.init()");var t=document.getElementsByTagName("a");var r=0;for(var i=0,s=t.length;i<s;i++){if((n.canPlayLink(t[i])||e.classContains(t[i],e.playableClass))&&!e.classContains(t[i],e.excludeClass)){e.addClass(t[i],e.css.sDefault);e.links[r]=t[i];e.indexByURL[t[i].href]=r;r++}}if(r>0){e.addEventHandler(document,"click",e.handleClick);if(e.config.autoPlay){e.handleClick({target:e.links[0],preventDefault:function(){}})}}n._writeDebug("inlinePlayer.init(): Found "+r+" relevant items.")};this.init()}var inlinePlayer=null;soundManager.setup({debugMode:true,preferFlash:false,useFlashBlock:true,url:"../../swf/",flashVersion:9});soundManager.onready(function(){inlinePlayer=new InlinePlayer})
